# file generated by gen_travis_yml.php, do not edit!

# use the container infrastructure
sudo: required

services:
  - docker

language: c

# use the system's PHP to run this script
addons:
  apt:
    packages:
      - php5-cli
      - php-pear
      - libxml2-dev
      - libcurl4-gnutls-dev

# now we'll specify the build matrix environment
env:
#  - PHP=5.4 enable_debug=no enable_maintainer_zts=no enable_libxml=yes enable_json=yes
#  - PHP=5.5 enable_debug=no enable_maintainer_zts=no enable_libxml=yes enable_json=yes
#  - PHP=5.6 enable_debug=no enable_maintainer_zts=no enable_libxml=yes enable_json=yes
#  - PHP=5.4 enable_debug=yes enable_maintainer_zts=no enable_libxml=yes enable_json=yes
#  - PHP=5.5 enable_debug=yes enable_maintainer_zts=no enable_libxml=yes enable_json=yes
#  - PHP=5.6 enable_debug=yes enable_maintainer_zts=no enable_libxml=yes enable_json=yes
#  - PHP=5.4 enable_debug=no enable_maintainer_zts=yes enable_libxml=yes enable_json=yes
#  - PHP=5.5 enable_debug=no enable_maintainer_zts=yes enable_libxml=yes enable_json=yes
#  - PHP=5.6 enable_debug=no enable_maintainer_zts=yes enable_libxml=yes enable_json=yes
#  - PHP=5.4 enable_debug=yes enable_maintainer_zts=yes enable_libxml=yes enable_json=yes
  - PHP=5.5 enable_debug=yes enable_maintainer_zts=yes enable_libxml=yes enable_json=yes
  - PHP=5.6 enable_debug=yes enable_maintainer_zts=yes enable_libxml=yes enable_json=yes

before_script:
  # build the matrix' PHP version
  - make -f travis/pecl/Makefile php
  # build the extension, the PECL variable expects the extension name 
  # and optionally the soname and a specific version of the extension
  # separeated by double colon, e.g. PECL=myext:ext:1.7.5
  - make -f travis/pecl/Makefile ext PECL=solr
  - docker pull omars/solr53
  - docker run -d -p 8983:8983 -t omars/solr53
  - docker ps -a

script:
  # run the PHPT test suite
  - make -f travis/pecl/Makefile test
